---
import type { RecipeIngredient } from '../lib/microcms'

const { ingredients, servings } = Astro.props as {
  ingredients: RecipeIngredient[]
  servings?: string
}
---

<section class="bg-white dark:bg-white/5 rounded-[2rem] p-6 md:p-8 shadow-sm border border-gray-100 dark:border-white/5">
  <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6">
    <div>
      <h3 class="text-2xl font-bold text-[#181211] dark:text-white">必要な材料</h3>
      <p class="text-gray-500 text-sm mt-1">買い物リストとしてチェックボックスをご活用ください</p>
    </div>
    {servings && (
      <div class="flex items-center bg-gray-50 dark:bg-white/10 rounded-xl px-4 py-2 border border-gray-200 dark:border-white/10">
        <span class="text-sm font-bold text-[#181211] dark:text-white">何皿分: {servings}</span>
      </div>
    )}
  </div>
  <ul class="flex flex-col gap-3">
    {ingredients.length === 0 && <li class="text-sm text-gray-500">材料が登録されていません。</li>}
    {ingredients.map((item) => (
      <li id={item.ingredients.id}>
        <label class="flex items-start gap-4 p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-white/5 transition-colors cursor-pointer group">
          <input
            class="custom-checkbox peer mt-1 size-5 rounded-md border-gray-300 text-primary focus:ring-primary/20 transition-colors"
            type="checkbox"
          />
          <div class="flex-1 ingredient-content">
            <div class="flex items-baseline justify-between border-b border-dashed border-gray-200 dark:border-gray-700 pb-2 group-hover:border-transparent transition-colors">
              <span class="ingredient-name text-base font-medium text-[#181211] dark:text-white group-hover:text-primary transition-colors peer-checked:text-gray-400 peer-checked:line-through">
                {item.ingredients.title}
              </span>
              <span class="ingredient-quantity text-base font-bold text-gray-900 dark:text-gray-100 peer-checked:text-gray-400 peer-checked:line-through">
                {item.quantity ?? '-'}
              </span>
            </div>
            {item.parts && <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">{item.parts}</p>}
          </div>
        </label>
      </li>
    ))}
  </ul>
</section>
