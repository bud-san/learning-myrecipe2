# サイト構造分析結果

## 概要
- **サイト名**: MyRecipe（自己満足献立ーズ）
- **フレームワーク**: Nuxt.js（SSG）
- **デプロイ先**: Netlify
- **CMS**: MicroCMS（確認済み）

## ページ構造

### 1. トップページ (`/`)

**タイプ**: 静的（SSG）
**目的**: 
- ユーザーニーズ: レシピの検索・閲覧、ランダムな献立の提案
- 企業側ニーズ: レシピコンテンツの露出、ユーザーエンゲージメント向上

**コンテンツ構成**:
- サイトタイトル: "MyRecipe" + サブタイトル "自己満足献立ーズ"
- 検索セクション
  - キーワード検索: 検索ボックス + 検索ボタン
  - 調理方法で検索: フィルターボタン（炒める、煮る、あえる、レンジでチン、オーブン）
  - 材料で絞り込み: 未実装（"カミング( ˙-˙ )ｽﾝｽﾝ"と表示）
- レシピ一覧セクション
  - 見出し: "ランダムな献立一覧"
  - レシピカード（8件表示）
    - レシピタイトル（h2）
    - 調理方法タグ（リスト形式）
    - レシピ説明文（パラグラフ）

**UIコンポーネント**:
- `Header`: サイトロゴ・タイトル
- `SearchSection`: 検索・フィルター機能
  - `SearchBox`: キーワード検索入力
  - `FilterButton`: 調理方法フィルター（5種類）
- `RecipeList`: レシピ一覧表示
  - `RecipeCard`: 個別レシピカード（リンク付き）
    - レシピタイトル
    - 調理方法タグ
    - 説明文

**CMS管理データ**:
- レシピ一覧データ（タイトル、説明、調理方法、ID）
- 調理方法マスタデータ（炒める、煮る、あえる、レンジでチン、オーブン）

**静的/動的**: 静的（ビルド時に生成）

---

### 2. レシピ詳細ページ (`/recipes/[id]`)

**タイプ**: 動的（SSGでビルド時に静的化）
**目的**:
- ユーザーニーズ: レシピの詳細情報閲覧、調理手順の確認、タイマー機能の利用
- 企業側ニーズ: レシピコンテンツの詳細表示、ユーザー滞在時間の向上

**コンテンツ構成**:
- パンくずリスト: ホームへのリンク
- レシピヘッダー
  - レシピタイトル（h1）
  - 調理方法タグ（リスト形式）
  - レシピ説明文（パラグラフ）
- ステップナビゲーション: ステップ番号のドット表示（4ステップ）
- 調理手順セクション
  - 各ステップ（article要素）
    - ステップ番号
    - 手順説明文
    - タイマーボタン（該当ステップのみ）
- タブ機能
  - "Cooking"タブ: 調理手順表示
  - "Memo"タブ: メモ機能（推測）

**UIコンポーネント**:
- `Breadcrumb`: パンくずリスト
- `RecipeHeader`: レシピ基本情報
  - `RecipeTitle`: タイトル表示
  - `CookingMethodTags`: 調理方法タグリスト
  - `RecipeDescription`: 説明文
- `StepNavigation`: ステップ番号ナビゲーション
- `RecipeSteps`: 調理手順セクション
  - `StepItem`: 個別ステップ
    - `StepContent`: 手順説明
    - `TimerButton`: タイマー機能（オプション）
- `TabNavigation`: タブ切り替え（Cooking/Memo）

**CMS管理データ**:
- レシピ詳細データ
  - タイトル
  - 説明文
  - 調理方法（複数選択可: 炒める、煮る、あえる、レンジでチン、オーブン）
  - 分量（`servings`）
  - 材料リスト（`ingredients`エンドポイントへの参照）
  - 調理手順（`steps`配列）
    - 手順説明文（`description`）
    - タイマー時間（`timer`、秒数、オプション）
    - グループ番号（`group`、オプション）
  - 作ったレポート（`report`）
  - AI生成の栄養情報（`ai`、オプション）

**静的/動的**: 動的（ビルド時に各レシピIDで静的化）

---

## CMSマッピング

### 確認済みMicroCMSエンドポイント

#### 1. `recipe` エンドポイント（確認済み）

**使用箇所**:
- `/` (トップページ): レシピ一覧取得
- `/recipes/[id]` (レシピ詳細): 個別レシピ取得

**実際のデータ構造**:
- `id`: レシピID（URLパスに使用、例: `q64099l_q65`）
- `title`: レシピタイトル（テキストフィールド）
- `description`: レシピ説明文（テキストエリア）
- `cooking`: 調理方法（配列、複数選択可）
  - 選択肢: "炒める", "煮る", "あえる", "レンジでチン", "オーブン"
- `servings`: 分量（テキストフィールド、例: "4", "2こ分", "3〜4皿分くらい"）
- `steps`: 調理手順（カスタムフィールド配列）
  - `fieldId`: "steps"（固定）
  - `description`: 手順説明文（テキストエリア）
  - `timer`: タイマー時間（数値、秒数、オプション）
  - `group`: グループ番号（数値、オプション、手順のグループ化に使用）
- `ingredients`: 材料リスト（カスタムフィールド配列）
  - `fieldId`: "ingredients"（固定）
  - `ingredients`: 材料マスタへの参照（`ingredients`エンドポイント）
    - `id`: 材料ID
    - `title`: 材料名
    - `description`: 材料の説明（オプション）
    - `nutrition`: 栄養情報への参照（`nutrition`エンドポイント、配列）
    - `season`: 旬の時期（オプション、例: "3,4,5"）
  - `quantity`: 分量（テキスト、例: "大さじ3", "100g"）
  - `parts`: 補足説明（テキスト、オプション）
  - `group`: グループ番号（数値、オプション、材料のグループ化に使用）
- `report`: 作ったレポート（テキストエリア、オプション）
- `ai`: AI生成の栄養情報（テキストエリア、オプション）

**メタデータ**:
- `createdAt`: 作成日時（ISO 8601形式）
- `updatedAt`: 更新日時（ISO 8601形式）
- `publishedAt`: 公開日時（ISO 8601形式）
- `revisedAt`: 改訂日時（ISO 8601形式）

**総レシピ数**: 8件（確認済み）

---

#### 2. `ingredients` エンドポイント（確認済み、参照先）

**用途**: 材料マスタデータ
**参照元**: `recipe`エンドポイントの`ingredients`フィールド

**実際のデータ構造**:
- `id`: 材料ID（例: `1mhuyv2kv`, `beggnsyculz`）
- `title`: 材料名（例: "砂糖", "クリームチーズ", "レモン汁"）
- `description`: 材料の説明（テキストエリア、オプション）
- `nutrition`: 栄養情報への参照（`nutrition`エンドポイント、配列）
- `season`: 旬の時期（テキスト、オプション、例: "3,4,5"）

**確認できた材料例**:
- 砂糖、クリームチーズ、レモン汁、牛乳、卵、みりん、醤油、たまねぎ、じゃがいも、にんじん、いんげん、豚肉、鶏肉、トマト缶、マスタード、ウスターソース、ケチャップ、ミックスベジタブル、ごはん、塩こしょう、マイタケ、水

---

#### 3. `nutrition` エンドポイント（確認済み、参照先）

**用途**: 栄養情報マスタデータ
**参照元**: `ingredients`エンドポイントの`nutrition`フィールド

**実際のデータ構造**:
- `id`: 栄養情報ID（例: `u6u5nr06ukjk`, `o9j65v2kw5tt`）

**確認できた栄養情報ID例**:
- `u6u5nr06ukjk`, `o9j65v2kw5tt`, `0tn381juq_2a`, `3rdfqukkq`, `jkvk9s2y9l`, `pmjetebqmxs`, `w-jxy8buz`, `pqh_4878wu`, `84920q5-iwk`, `mjax9p-25`, `zlupi2zb3`, `fkh2urpeqmm`, `azqb3whivd4`, `bj7s4w929r7d`

---

## 不足している可能性のあるエンドポイント

1. **調理方法マスタ** (`cookingMethods`)
   - 現状: `recipe`エンドポイントの`cooking`フィールドに直接配列として保存
   - 推奨: マスタデータとして分離し、管理性を向上（選択肢の追加・変更が容易に）

2. **材料検索機能**
   - 現状: 材料マスタ（`ingredients`）は存在するが、サイト上で材料検索機能は未実装（"カミング( ˙-˙ )ｽﾝｽﾝ"と表示）
   - 推奨: 材料検索・絞り込み機能実装時に、`ingredients`エンドポイントを活用

3. **カテゴリ/タグ** (`categories` / `tags`)
   - 現状: 調理方法（`cooking`）のみで分類
   - 推奨: より詳細な分類のため（例: ジャンル、難易度、所要時間など）

---

## 冗長 or 不要になりそうなエンドポイント

現時点では、サイト構造がシンプルなため、特に冗長なエンドポイントは見当たりません。

**確認済みエンドポイント**:
- `recipe`: メインエンドポイント（8件のレシピデータ）
- `ingredients`: 材料マスタ（多数の材料データ）
- `nutrition`: 栄養情報マスタ（多数の栄養情報データ）

すべて適切に使用されており、参照関係も明確です。

---

## 技術的考察

### 現在の実装
- **フレームワーク**: Nuxt.js（SSG）
- **スタイリング**: TailwindCSS（推測、クラス名から）
- **アイコン**: Font Awesome 5.15.4
- **データ取得**: ビルド時にMicroCMSから取得し、静的HTMLを生成

### リニューアル時の推奨事項

1. **エンドポイント構造の最適化**
   - 調理方法をマスタデータとして分離
   - 材料マスタの追加（材料検索機能実装時）

2. **データ構造の改善**
   - ステップデータの構造化（タイマー情報、グループ情報は既に実装済み）
   - `report`フィールドの活用（作ったレポート情報）
   - `ai`フィールドの活用（AI生成の栄養情報）

3. **パフォーマンス最適化**
   - 画像最適化（サムネイル画像の追加検討）
   - ページネーション実装（レシピ数増加時）

4. **機能拡張**
   - 材料検索・絞り込み機能の実装
   - レシピ検索機能の強化
   - お気に入り機能（推測）

---

## まとめ

現在のサイトはシンプルな構造で、レシピの閲覧と検索に特化しています。MicroCMSの`recipe`エンドポイントを中心に、`ingredients`と`nutrition`エンドポイントへの参照構造でデータ管理が行われています。

**主要なページ**: 2種類（トップページ、レシピ詳細ページ）
**主要なエンドポイント**: 3つ（`recipe`, `ingredients`, `nutrition`）
**レシピ総数**: 8件（確認済み）
**UIコンポーネント**: 約10種類
**CMS管理データ**: 
- レシピ情報（タイトル、説明、調理方法、分量、手順、材料、レポート、AI情報）
- 材料マスタ（材料名、説明、栄養情報、旬の時期）
- 栄養情報マスタ（栄養素データ）

**データ構造の特徴**:
- カスタムフィールドを活用した柔軟な構造（`steps`, `ingredients`）
- 参照関係によるデータの正規化（材料・栄養情報は別エンドポイントで管理）
- タイマー機能、グループ化機能など実用的な機能が実装済み
